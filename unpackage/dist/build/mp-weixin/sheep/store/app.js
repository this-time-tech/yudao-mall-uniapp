"use strict";const e=require("../api/promotion/diy.js"),o=require("../../common/vendor.js"),t=require("../platform/index.js"),r=require("../router/index.js"),s=require("./user.js"),i=require("./sys.js"),a=o.defineStore({id:"app",state:()=>({info:{name:"",logo:"",version:"",copyright:"",copytime:"",cdnurl:"",filesystem:""},platform:{share:{methods:[],forwardInfo:{},posterInfo:{},linkAddress:""},bind_mobile:0},template:{basic:{},home:{style:{},data:[]},user:{style:{},data:[]}},shareInfo:{},has_wechat_trade_managed:0}),actions:{async init(e=null){await t._platform.checkNetwork()||r.$router.error("NetworkError"),await n(this.template,e);{this.info={name:"芋道商城",logo:"https://static.iocoder.cn/ruoyi-vue-pro-logo.png",version:"2.4.0",copyright:"全部开源，个人与企业可 100% 免费使用",copytime:"Copyright© 2018-2024",cdnurl:"https://file.sheepjs.com",filesystem:"qcloud"},this.platform={share:{methods:["forward","poster","link"],linkAddress:"http://127.0.0.1:3000",posterInfo:{user_bg:"/static/img/shop/config/user-poster-bg.png",goods_bg:"/static/img/shop/config/goods-poster-bg.png",groupon_bg:"/static/img/shop/config/groupon-poster-bg.png"},forwardInfo:{title:"",image:"",desc:""}},bind_mobile:0},this.has_wechat_trade_managed=0;i.sys().setTheme();const e=s.user();return e.isLogin&&e.loginAfter(),Promise.resolve(!0)}}},persist:{enabled:!0,strategies:[{key:"app-store"}]}}),n=async(o,t)=>{var s;const{data:i}=t?await e.DiyApi.getDiyTemplate(t):await e.DiyApi.getUsedDiyTemplate();if(!i)return void r.$router.error("TemplateError");const a=null==(s=null==i?void 0:i.property)?void 0:s.tabBar;a&&(o.basic.tabbar=a,(null==a?void 0:a.theme)&&(o.basic.theme=null==a?void 0:a.theme)),o.home=null==i?void 0:i.home,o.user=null==i?void 0:i.user},p=Object.freeze(Object.defineProperty({__proto__:null,default:a},Symbol.toStringTag,{value:"Module"}));exports.__vite_glob_0_0=p,exports.app=a;
