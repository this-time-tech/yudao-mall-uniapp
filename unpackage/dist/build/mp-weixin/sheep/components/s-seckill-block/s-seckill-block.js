"use strict";const t=require("../../../common/vendor.js"),e=require("../../index.js"),a=require("../../api/promotion/seckill.js"),i=require("../../api/product/spu.js");if(!Array){t.resolveComponent("s-goods-column")()}Math;const o={__name:"s-seckill-block",props:{data:{type:Object,default(){}},styles:{type:Object,default(){}}},setup(o){const d="oneColBigImg",s="twoCol",r="oneColSmallImg",u=t.reactive({spuList:[],leftSpuList:[],rightSpuList:[]}),l=o,{layoutType:n,btnBuy:p,activityIds:c}=l.data||{},{marginLeft:g,marginRight:f}=l.styles||{},m=t.computed((()=>"text"===p.type?{background:`linear-gradient(to right, ${p.bgBeginColor}, ${p.bgEndColor})`}:"img"===p.type?{width:"54rpx",height:"54rpx",background:`url(${e.sheep.$url.cdn(p.imgUrl)}) no-repeat`,backgroundSize:"100% 100%"}:void 0));let b=0,h=0,y=0;function v(t=0,e="left"){u.spuList[b]&&("left"===e&&(h+=t),"right"===e&&(y+=t),h<=y?u.leftSpuList.push(u.spuList[b]):u.rightSpuList.push(u.spuList[b]),b++)}async function L(t){const{data:e}=await i.SpuApi.getSpuDetail(t);return e}return t.onMounted((async()=>{const t=await async function(t){const{data:e}=await a.SeckillApi.getSeckillActivityListByIds(t);return e}(c.join(","));for(const e of t)u.spuList.push(await L(e.spuId));t.forEach((t=>{const e=t.seckillPrice||1/0,a=u.spuList.find((e=>t.spuId===e.id));a&&(a.name=t.name,a.price=Math.min(e,a.price),a.activityId=t.id)})),n===s&&v()})),(a,i)=>t.e({a:t.unref(n)===d&&u.spuList.length},t.unref(n)===d&&u.spuList.length?{b:t.f(u.spuList,((a,i,d)=>{var s;return{a:t.o((i=>t.unref(e.sheep).$router.go("/pages/goods/seckill",{id:a.activityId})),a.id),b:"77f690b3-0-"+d,c:t.p({size:"sl",goodsFields:o.data.fields,tagStyle:o.data.badge,data:a,titleColor:null==(s=o.data.fields.name)?void 0:s.color,subTitleColor:o.data.fields.introduction.color,topRadius:o.data.borderRadiusTop,bottomRadius:o.data.borderRadiusBottom}),d:a.id}})),c:t.t("text"===t.unref(p).type?t.unref(p).text:""),d:t.s(m.value),e:t.s({marginBottom:2*o.data.space+"rpx"})}:{},{f:t.unref(n)===r&&u.spuList.length},t.unref(n)===r&&u.spuList.length?{g:t.f(u.spuList,((a,i,d)=>{var s;return{a:t.o((i=>t.unref(e.sheep).$router.go("/pages/goods/seckill",{id:a.activityId})),a.id),b:"77f690b3-1-"+d,c:t.p({size:"lg",goodsFields:o.data.fields,data:a,tagStyle:o.data.badge,titleColor:null==(s=o.data.fields.name)?void 0:s.color,subTitleColor:o.data.fields.introduction.color,topRadius:o.data.borderRadiusTop,bottomRadius:o.data.borderRadiusBottom}),d:a.id}})),h:t.t("text"===t.unref(p).type?t.unref(p).text:""),i:t.s(m.value),j:t.s({marginBottom:o.data.space+"px"})}:{},{k:t.unref(n)===s&&u.spuList.length},t.unref(n)===s&&u.spuList.length?{l:t.f(u.leftSpuList,((a,i,d)=>{var s;return{a:t.o((i=>t.unref(e.sheep).$router.go("/pages/goods/seckill",{id:a.activityId})),a.id),b:t.o((t=>v(t,"left")),a.id),c:"77f690b3-2-"+d,d:t.p({size:"md",goodsFields:o.data.fields,tagStyle:o.data.badge,data:a,titleColor:null==(s=o.data.fields.name)?void 0:s.color,subTitleColor:o.data.fields.introduction.color,topRadius:o.data.borderRadiusTop,bottomRadius:o.data.borderRadiusBottom,titleWidth:330-t.unref(g)-t.unref(f)}),e:a.id}})),m:t.t("text"===t.unref(p).type?t.unref(p).text:""),n:t.s(m.value),o:t.s({paddingRight:o.data.space+"rpx",marginBottom:o.data.space+"px"}),p:t.f(u.rightSpuList,((a,i,d)=>{var s;return{a:t.o((i=>t.unref(e.sheep).$router.go("/pages/goods/seckill",{id:a.activityId})),a.id),b:t.o((t=>v(t,"right")),a.id),c:"77f690b3-3-"+d,d:t.p({size:"md",goodsFields:o.data.fields,tagStyle:o.data.badge,data:a,titleColor:null==(s=o.data.fields.name)?void 0:s.color,subTitleColor:o.data.fields.introduction.color,topRadius:o.data.borderRadiusTop,bottomRadius:o.data.borderRadiusBottom,titleWidth:330-t.unref(g)-t.unref(f)}),e:a.id}})),q:t.t("text"===t.unref(p).type?t.unref(p).text:""),r:t.s(m.value),s:t.s({paddingLeft:o.data.space+"rpx",marginBottom:o.data.space+"px"})}:{})}},d=t._export_sfc(o,[["__scopeId","data-v-77f690b3"]]);wx.createComponent(d);
