"use strict";const e=require("../../../../common/vendor.js"),o=require("../../../index.js"),s=require("../../../validate/form.js"),r=require("../../../hooks/useModal.js"),n=require("../../../api/member/auth.js");if(!Array){(e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-forms-item")+e.resolveComponent("uni-forms"))()}Math||((()=>"../../../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../../../../uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../../../uni_modules/uni-forms/components/uni-forms/uni-forms.js"))();const i={__name:"account-login",props:{agreeStatus:{type:Boolean,default:!1}},emits:["onConfirm"],setup(i,{emit:l}){const t=e.ref(null),a=l,u=i,m=e.reactive({model:{mobile:"",password:""},rules:{mobile:s.mobile,password:s.password}});async function d(){if(!(await e.unref(t).validate().catch((e=>{console.log("error: ",e)}))))return;if(!u.agreeStatus)return a("onConfirm",!0),void o.sheep.$helper.toast("请勾选同意");const{code:s,data:i}=await n.AuthUtil.login(m.model);0===s&&r.closeAuthModal()}return(o,s)=>({a:e.o((o=>e.unref(r.showAuthModal)("smsLogin"))),b:e.o((o=>e.unref(r.showAuthModal)("resetPassword"))),c:e.o((e=>m.model.mobile=e)),d:e.p({placeholder:"请输入账号",inputBorder:!1,modelValue:m.model.mobile}),e:e.p({name:"mobile",label:"账号"}),f:e.o(d),g:e.o((e=>m.model.password=e)),h:e.p({type:"password",placeholder:"请输入密码",inputBorder:!1,modelValue:m.model.password}),i:e.p({name:"password",label:"密码"}),j:e.sr(t,"357bfd2c-0",{k:"accountLoginRef"}),k:e.o((e=>m.model=e)),l:e.p({rules:m.rules,validateTrigger:"bind",labelWidth:"140",labelAlign:"center",modelValue:m.model})})}},l=e._export_sfc(i,[["__scopeId","data-v-357bfd2c"]]);wx.createComponent(l);
