"use strict";const e=require("../../../../common/vendor.js"),o=require("../../../index.js"),n=require("../../../validate/form.js"),i=require("../../../hooks/useModal.js"),s=require("../../../api/member/auth.js");if(!Array){(e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-forms-item")+e.resolveComponent("uni-forms"))()}Math||((()=>"../../../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../../../../uni_modules/uni-forms/components/uni-forms-item/uni-forms-item.js")+(()=>"../../../../uni_modules/uni-forms/components/uni-forms/uni-forms.js"))();const r={__name:"sms-login",props:{agreeStatus:{type:Boolean,default:!1}},emits:["onConfirm"],setup(r,{emit:l}){const m=e.ref(null),t=l,u=r,a=e.reactive({isMobileEnd:!1,codeText:"获取验证码",model:{mobile:"",code:""},rules:{code:n.code,mobile:n.mobile}});async function d(){if(!(await e.unref(m).validate().catch((e=>{console.log("error: ",e)}))))return;if(!u.agreeStatus)return t("onConfirm",!0),void o.sheep.$helper.toast("请勾选同意");const{code:n}=await s.AuthUtil.smsLogin(a.model);0===n&&i.closeAuthModal()}return(o,n)=>({a:e.o((o=>e.unref(i.showAuthModal)("accountLogin"))),b:e.t(e.unref(i.getSmsTimer)("smsLogin")),c:a.isMobileEnd,d:a.isMobileEnd?1:"",e:e.o((o=>e.unref(i.getSmsCode)("smsLogin",a.model.mobile))),f:e.o((e=>a.model.mobile=e)),g:e.p({placeholder:"请输入手机号",inputBorder:!1,type:"number",modelValue:a.model.mobile}),h:e.p({name:"mobile",label:"手机号"}),i:e.o(d),j:e.o((e=>a.model.code=e)),k:e.p({placeholder:"请输入验证码",inputBorder:!1,type:"number",maxlength:"4",modelValue:a.model.code}),l:e.p({name:"code",label:"验证码"}),m:e.sr(m,"ba782287-0",{k:"smsLoginRef"}),n:e.o((e=>a.model=e)),o:e.p({rules:a.rules,validateTrigger:"bind",labelWidth:"140",labelAlign:"center",modelValue:a.model})})}},l=e._export_sfc(r,[["__scopeId","data-v-ba782287"]]);wx.createComponent(l);
