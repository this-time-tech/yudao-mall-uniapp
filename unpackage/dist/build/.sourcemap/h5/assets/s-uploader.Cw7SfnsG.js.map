{"version":3,"file":"s-uploader.Cw7SfnsG.js","sources":["../../../../../sheep/components/s-uploader/choose-and-upload-file.js","../../../../../sheep/components/s-uploader/utils.js"],"sourcesContent":null,"names":["ERR_MSG_FAIL","normalizeChooseAndUploadFileRes","res","fileType","tempFiles","forEach","item","index","name","path","substring","lastIndexOf","cloudPath","Date","now","tempFilePaths","map","file","uploadCloudFiles","files","max","onUploadProgress","len","JSON","parse","stringify","length","count","self","this","Promise","resolve","next","cur","find","url","errMsg","fileItem","findIndex","v","uuid","uniCloud","uploadFile","filePath","then","fileID","catch","message","async","uploadFiles","choosePromise","onChooseFile","customChooseRes","data","FileApi","chooseAndUploadFile","opts","type","sizeType","sourceType","extension","reject","chooseImage$1","success","fail","replace","chooseImage","camera","compressed","maxDuration","chooseVideo$1","tempFilePath","duration","size","height","width","tempFile","chooseVideo","chooseFile","uni.chooseFile","wx","chooseMessageFile","chooseFile$1","chooseAll","get_file_ext","last_len","ext","get_extname","fileExtname","Array","isArray","split","get_file_data","extname","toLowerCase","filedata","image","video","imageinfo","filepath","getImageInfo","src","err","location","_extname","filePaths","indexOf","push","showToast","title","icon"],"mappings":"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"}