import{z as a,s as t,v as s,aq as o,o as e,r as n,e as l,f as i,w as r,u as c,j as u,k as p,x as g,l as m,m as d,F as f,p as y,t as _,g as b,i as h,C as v,S as x,a2 as S,D as k}from"./index-BYbmVHYF.js";import{_ as j}from"./s-goods-column.BMPRB1aK.js";import{_ as C}from"./uni-load-more.7Sj0orxA.js";import{S as w}from"./s-layout.B9Wf0wyf.js";import{C as D}from"./combination.xWWPgO_7.js";import{_ as $}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./useGoods.BAFIflfD.js";import"./index.DEmjmW11.js";const z=$({__name:"list",setup($){a((a=>({aec233b2:c(I)})));const{safeAreaInsets:z,safeArea:N}=t.$platform.device,A=t.$platform.navbar,E=2*t.$platform.device.statusBarHeight,F=2*(N.height+z.bottom)+E-A-350,I=t.$url.css("/static/img/shop/goods/groupon-header.png"),M=s({pagination:{list:[],total:0,pageNo:1,pageSize:10},loadStatus:"",summaryData:{}});async function P(){M.loadStatus="loading";const{data:a}=await D.getCombinationActivityPage({pageNo:M.pagination.pageNo,pageSize:M.pagination.pageSize});a.list.forEach((a=>{M.pagination.list.push({...a,price:a.combinationPrice})})),M.pagination.total=a.total,M.loadStatus=M.pagination.list.length<M.pagination.total?"more":"noMore"}function T(){"noMore"!==M.loadStatus&&(M.pagination.pageNo++,P())}return o((()=>T())),e((()=>{(async()=>{const{data:a}=await D.getCombinationRecordSummary();M.summaryData=a})(),P()})),(a,s)=>{const o=h,e=v,D=k,$=n(l("s-goods-column"),j),z=n(l("uni-load-more"),C),N=x,A=n(l("s-layout"),w);return u(),i(A,{bgStyle:{color:"#FE832A"},navbar:"inner"},{default:r((()=>[p(o,{class:"page-bg",style:g([{marginTop:"-"+Number(E+88)+"rpx"}])},null,8,["style"]),p(o,{class:"list-content"},{default:r((()=>[p(o,{class:"content-header ss-flex-col ss-col-center ss-row-center"},{default:r((()=>[p(o,{class:"content-header-title ss-flex ss-row-center"},{default:r((()=>[(u(!0),m(f,null,d(M.summaryData.avatars,((a,t)=>(u(),i(o,{key:t,class:"picture",style:g(6===t?"position: relative":"position: static")},{default:r((()=>[S("span",{class:"avatar",style:g(`background-image: url(${a})`)},null,4),6===t&&M.summaryData.avatars.length>3?(u(),m("span",{key:0,class:"mengceng"},[S("i",null,"···")])):b("",!0)])),_:2},1032,["style"])))),128)),p(e,{class:"pic_count"},{default:r((()=>[y(_(M.summaryData.userCount||0)+"人参与",1)])),_:1})])),_:1})])),_:1}),p(N,{class:"scroll-box",style:g({height:F+"rpx"}),"scroll-y":"true","scroll-with-animation":!1,"enable-back-to-top":!0},{default:r((()=>[(u(!0),m(f,null,d(M.pagination.list,(a=>(u(),i(o,{class:"goods-box ss-m-b-20",key:a.id},{default:r((()=>[p($,{class:"",size:"lg",data:a,grouponTag:!0,onClick:s=>c(t).$router.go("/pages/goods/groupon",{id:a.id})},{cart:r((()=>[p(D,{class:"ss-reset-button cart-btn"},{default:r((()=>[y("去拼团")])),_:1})])),_:2},1032,["data","onClick"])])),_:2},1024)))),128)),M.pagination.total>0?(u(),i(z,{key:0,status:M.loadStatus,"content-text":{contentdown:"上拉加载更多"},onClick:T},null,8,["status"])):b("",!0)])),_:1},8,["style"])])),_:1})])),_:1})}}},[["__scopeId","data-v-67f995d3"]]);export{z as default};
