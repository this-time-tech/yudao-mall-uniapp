import{v as a,o as t,aq as e,aO as s,r as n,e as o,f as i,w as l,cG as r,j as u,k as c,p,t as m,l as d,m as g,F as f,g as y,s as _,C as k,i as w,y as h,u as j,q as D}from"./index-BYbmVHYF.js";import{_ as S}from"./uni-load-more.7Sj0orxA.js";import{S as x}from"./s-layout.B9Wf0wyf.js";import{f as M}from"./useGoods.BAFIflfD.js";import{r as b}from"./index.DEmjmW11.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{l as v}from"./lodash.default.pbM9n79J.js";import"./min.BPJjMKdV.js";const F=C({__name:"commission-ranking",setup(C){const F=["周排行","月排行"],N=a({currentTab:0,position:0,pagination:{list:[],total:0,pageNo:1,pageSize:10},loadStatus:""});async function P(){const{code:a,data:t}=await r.getBrokerageUserChildSummaryPageByPrice({pageNo:N.pagination.pageNo,pageSize:N.pagination.pageSize,"times[0]":N.times[0],"times[1]":N.times[1]});0===a&&(N.pagination.list=v.concat(N.pagination.list,t.list),N.pagination.total=t.total,N.loadStatus=N.pagination.list.length<N.pagination.total?"more":"noMore",1===N.pagination.pageNo&&async function(){const{code:a,data:t}=await r.getRankByPrice({times:N.times});if(0!==a)return;N.position=t}())}function T(a){return _.$helper.timeFormat(a,"yyyy-mm-dd hh:MM:ss")}function z(){let a;a=0===N.currentTab?function(){const a=new Date,t=a.getDay();return[new Date(a.getFullYear(),a.getMonth(),a.getDate()-t,0,0,0),new Date(a.getFullYear(),a.getMonth(),a.getDate()+(6-t),23,59,59)]}():function(){const a=new Date,t=a.getFullYear(),e=a.getMonth(),s=new Date(t,e,1,0,0,0),n=new Date(t,e+1,1),o=new Date(n.getTime()-1);return[s,o]}(),N.times=[T(a[0]),T(a[1])]}function B(){"noMore"!==N.loadStatus&&(N.pagination.pageNo++,P())}return t((function(){z(),P()})),e((()=>B())),(a,t)=>{const e=k,r=w,_=D,C=s("emptyPage"),v=n(o("uni-load-more"),S),T=n(o("s-layout"),x);return u(),i(T,{title:"佣金排行榜"},{default:l((()=>[c(r,{class:"commission-rank"},{default:l((()=>[c(r,{class:"header"},{default:l((()=>[N.position?(u(),i(r,{key:0,class:"rank"},{default:l((()=>[p(" 您目前的排名 "),c(e,{class:"num"},{default:l((()=>[p(m(N.position),1)])),_:1}),p(" 名 ")])),_:1})):(u(),i(r,{key:1,class:"rank"},{default:l((()=>[p("您目前暂无排名")])),_:1}))])),_:1}),c(r,{class:"wrapper"},{default:l((()=>[c(r,{class:"nav acea-row row-around",style:{"justify-content":"space-around",display:"flex"}},{default:l((()=>[(u(),d(f,null,g(F,((a,t)=>c(r,{class:h(["item",N.currentTab===t?"font-color":""]),key:t,onClick:a=>async function(a){N.currentTab=a,b(N.pagination),z(),P()}(t)},{default:l((()=>[p(m(a),1)])),_:2},1032,["class","onClick"]))),64))])),_:1}),c(r,{class:"list"},{default:l((()=>[(u(!0),d(f,null,g(N.pagination.list,((a,t)=>(u(),i(r,{class:"item",key:t},{default:l((()=>[t<=2?(u(),i(r,{key:0,class:"num"},{default:l((()=>[c(_,{src:"/static/images/medal0"+(t+1)+".png"},null,8,["src"])])),_:2},1024)):(u(),i(r,{key:1,class:"num"},{default:l((()=>[p(m(t+1),1)])),_:2},1024)),c(r,{class:"pictrue"},{default:l((()=>[c(_,{src:a.avatar},null,8,["src"])])),_:2},1024),c(r,{class:"text"},{default:l((()=>[p(m(a.nickname),1)])),_:2},1024),c(r,{class:"people"},{default:l((()=>[p("￥"+m(j(M)(a.brokeragePrice)),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),0===N.pagination.list.length?(u(),i(r,{key:0,class:"noCommodity"},{default:l((()=>[c(C,{title:"暂无排行～"})])),_:1})):y("",!0)])),_:1})])),_:1}),N.pagination.total>0?(u(),i(v,{key:0,status:N.loadStatus,"content-text":{contentdown:"上拉加载更多"},onClick:B},null,8,["status"])):y("",!0)])),_:1})}}},[["__scopeId","data-v-fd201de6"]]);export{F as default};
