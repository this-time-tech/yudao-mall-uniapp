import{v as t,aq as a,o as s,r as o,e as i,f as e,w as l,a0 as n,j as c,k as d,p as A,l as p,m as r,F as g,g as f,i as m,q as u,t as y,u as S,s as B,D as I}from"./index-BYbmVHYF.js";import{_ as x}from"./su-sticky.J63v9NrQ.js";import{_ as Q}from"./s-goods-column.BMPRB1aK.js";import{_ as U}from"./uni-load-more.7Sj0orxA.js";import{S as w}from"./s-layout.B9Wf0wyf.js";import{R as j}from"./rewardActivity.DTWROGoz.js";import{S as k}from"./spu.DkDzSSyF.js";import{a as M}from"./useGoods.BAFIflfD.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{l as h}from"./lodash.default.pbM9n79J.js";import"./index.DEmjmW11.js";import"./min.BPJjMKdV.js";const C=b({__name:"index",setup(b){const C=t({activityId:0,activityInfo:{},pagination:{list:[],total:1,pageNo:1,pageSize:8},loadStatus:"",leftGoodsList:[],rightGoodsList:[]});let H=0,K=0,F=0;function E(t=0,a="left"){C.pagination.list[H]&&("left"===a?K+=t:F+=t,K<=F?C.leftGoodsList.push(C.pagination.list[H]):C.rightGoodsList.push(C.pagination.list[H]),H++)}async function T(){const t={};2===C.activityInfo.productScope?t.ids=C.activityInfo.productSpuIds.join(","):3===C.activityInfo.productScope&&(t.categoryIds=C.activityInfo.productSpuIds.join(",")),C.loadStatus="loading";const{code:a,data:s}=await k.getSpuPage({pageNo:C.pagination.pageNo,pageSize:C.pagination.pageSize,...t});0===a&&(await n.getSettlementProduct(s.list.map((t=>t.id)).join(",")).then((t=>{0===t.code&&M(s.list,t.data)})),C.pagination.list=h.concat(C.pagination.list,s.list),C.pagination.total=s.total,C.loadStatus=C.pagination.list.length<C.pagination.total?"more":"noMore",E())}function L(){"noMore"!==C.loadStatus&&(C.pagination.pageNo++,T())}return a((()=>{L()})),s((async t=>{C.activityId=t.activityId,await async function(t){const{code:a,data:s}=await j.getRewardActivity(t);0===a&&(C.activityInfo=s)}(C.activityId),await T(C.activityId)})),(t,a)=>{const s=m,n=u,j=o(i("su-sticky"),x),k=I,M=o(i("s-goods-column"),Q),b=o(i("uni-load-more"),U),h=o(i("s-layout"),w);return c(),e(h,{class:"activity-wrap",title:C.activityInfo.title},{default:l((()=>[d(j,{bgColor:"#fff"},{default:l((()=>[d(s,{class:"ss-flex ss-col-top tip-box"},{default:l((()=>[d(s,{class:"type-text ss-flex ss-row-center"},{default:l((()=>[A("满减：")])),_:1}),d(s,{class:"ss-flex-1"},{default:l((()=>[(c(!0),p(g,null,r(C.activityInfo.rules,(t=>(c(),e(s,{class:"tip-content",key:t},{default:l((()=>[A(y(t.description),1)])),_:2},1024)))),128))])),_:1}),d(n,{class:"activity-left-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAABICAMAAAAQ/CHDAAAAQlBMVEUAAAD/59f/5tf/59f/5tf/38//59j/59f/5tf/5tf/59f/49f/49T/5dj/5tj/5dX/5dj/5tf/5tj/5Nr/5NT/5tc+RkjZAAAAFXRSTlMAIN+f3hBff++/cFBAzq+Az76PMDD6OdBvAAABEElEQVRo3sXRS5aDMBBDUQrbGNuEX1r732oPNUhmOUhvA/eUasI8t5aOPrYyyQJbz/0Yf5MgfHTu/emr8b0zjZjY0yibCStQ1g4+WYHy4E2L0lWidO8QoqwtUpQzhxBl+yZE2bw8gApYwMACBhYwsPiheQhRlkKIsloMKPIiRbmxAcXahSjLIURZd6C4woAiL0KUVQeKHAYUeQhRVh0o9mJAkcOAIr+FKOsOFNWBojpQ3A4UyYHiVZQoVSVKVYlSNaC4HCiSA0VyoKgOFNWBYnGg69uAIocBRS4GFMmBojpQbA50DQOKlwPF7UCxOVC+FcKaA0XXoxwY0poDRVejHBjimgPFcKC5GFAcDhThQK9/qgrZLofQBLIAAAAASUVORK5CYII="}),d(n,{class:"activity-right-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJEAAABkBAMAAAB0qc+6AAAAJ1BMVEUAAAD/gwL/cAP/cwP/hgH/gAH/fQL/dwL/dQP/ewL+iAH/bgX/dwDlI8ExAAAADXRSTlMALBUZLyglHxwiMhIK/FILewAABPNJREFUWMOlmbuLE2EUxeNrdV0LBzIIarFOEIQ06ljERxNItZWjTAS1UHBHos1iYYylgyhWNmYMWKaykoAirkVcFHzkj/LL3Fe+mYkze73VavHjnPOdewd2a8ff04w7Gx0zbcepaQZIiEpBBjVVkW4yZw4CUR9UpAcsiUFK0lMCbWww6ayK9KpA05aKdEkCB5Ah3VGRvjCJJTlHtST77QzppIr0WxJn0gkV6TCB0F3dkI6pSHs4pnEKmmtyVaTVTOBzTbp1OcQkjklZ8rVcLx1lNY9QB5ikLhRpYnfqGtxEUSxJXYNX1tMh6j/WZYwNR9K6al3IHQyQrmpI+0mTcFzntoZ00MoJUce01Rzj1rVRVKDbl/QSpKR6u02itrSFGvPpRdJJ1SUXktPGxN0b2hpIxREVTjU1QEkQFGpy72gvFB1MBDnhNeVd6eDUyV7Y1djbQFSbOu4EbhhuqR5vTJoob9cNb2kejy+BQ+aCUGVvxVQ8QwrNvNZs3vi9tb8pKLyuiZzMUTMBta6IHBO3QZrMDyOJzAFKk/kquKt35OnSebf7lvMHGAdA3d7u7d1DEhYzwKCi3Yv6DYeA64SaFKJWQBMdcZdQ1UWt2UFx3jCbURR9qJj09kJQ9DUIAicM0F0UPaxG2mnST9/neVNQAZszc7aSJI9Jh/jKSeLdlHS/Sj0nnsc/1xfaFKCkzTmp97CCN2+BdKHDBTfDmswMt0rfzYAm/K8D/NkMHZefLhU1XC8JyYCa3uLCsDd0F8EMR8mHMpAHiZM9+WrCgLte1Bsl03+AJlnSgXqdSS6AuqhpNHo7LQF52wv/1SZ3mDfGZCTNUevLrZEmsccoOipAGsFcKQL98c+fBxBoQnsIosBtUjJ4NM07830AsTuxJw2XtwNS0u9fntpL6/sND0kTIOGcshpOxewBaJT0zTz7OkPMzOgxJDZnkVblU06SxF1/0E/nyUsD8F766Zw3A5qAxBPgVaGYUBMMgF68TCdGUoOfziZ94y+waBoiKUFJgAIS5ZTXtMZ5C6mHpD6SABTHAPKBQySZc/MyOfbTZUAwLdK0jHQQ3y5PSgBEKB8nm7jMXYclbWLimcCfQEwxkTDwHOkAJ94NrTr1bXsI8ho5kogKaIFDDNxuE5BaUoKlpBXrYIqmxE4cSZ4PHMzJntDNBE4LTCTR1KCcms1JAelH5ohHduCZinMHhCSzSbsiIImczUmdQFQRaaWwTQnUCRtOIH85SUR17fVFdxRTTG0ie4Wk1YJLwCBLFEuaMMme5/mnG6Aom9QgUctIe+FeiqYERIk5GjYnJHs+kjnZOqvibI7WdynpyBs5TkMm5c1x5ETKz08QJb1MrFXJ1YlJ+TndtbcuEUmydSZxAP2LdGSIV1yWTkgtLBMXc0KkwvfDmMRdflmkl0gqnl8FB9MGsSZxVzyfMCYJHE+vHHEEsaZlUT1mSaPcmbNRJaTa2uOoh23Cwbxb/GEpcycodDewNPm5b10pqbYP1y6zv5y4V+pOumBtnZxeYqE3IJWgBllSjCSpUwmJX9CgksS6KTEHzmfOzLRWirpIHcDEYyFJ4F8BVDKfMXCSFPP+Qi/noFq12XmxeOVa2IGGz1s3q/5LgDPyieJeepQTOKs6sxYlHscx3hSoEwuqzmqAPbq80PHmTPVngp0z6a4Qi32pYLNtr5GGtP01p+Yv+GHSkGRJRy4AAAAASUVORK5CYII="})])),_:1})])),_:1}),d(s,{class:"ss-flex ss-flex-wrap ss-p-x-20 ss-m-t-20 ss-col-top"},{default:l((()=>[d(s,{class:"goods-list-box"},{default:l((()=>[(c(!0),p(g,null,r(C.leftGoodsList,(t=>(c(),e(s,{class:"left-list",key:t.id},{default:l((()=>[d(M,{class:"goods-md-box",size:"md",data:t,onClick:a=>S(B).$router.go("/pages/goods/index",{id:t.id}),onGetHeight:a[0]||(a[0]=t=>E(t,"left"))},{cart:l((()=>[d(k,{class:"ss-reset-button cart-btn"})])),_:2},1032,["data","onClick"])])),_:2},1024)))),128))])),_:1}),d(s,{class:"goods-list-box"},{default:l((()=>[(c(!0),p(g,null,r(C.rightGoodsList,(t=>(c(),e(s,{class:"right-list",key:t.id},{default:l((()=>[d(M,{class:"goods-md-box",size:"md",data:t,onClick:a=>S(B).$router.go("/pages/goods/index",{id:t.id}),onGetHeight:a[1]||(a[1]=t=>E(t,"right"))},{cart:l((()=>[d(k,{class:"ss-reset-button cart-btn"})])),_:2},1032,["data","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1}),C.pagination.total>0?(c(),e(b,{key:0,status:C.loadStatus,"content-text":{contentdown:"上拉加载更多"},onClick:L},null,8,["status"])):f("",!0)])),_:1},8,["title"])}}},[["__scopeId","data-v-19929d6c"]]);export{C as default};
