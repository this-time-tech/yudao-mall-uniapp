import{z as s,s as e,v as t,o as a,r as l,e as i,f as o,w as n,u as c,j as r,ab as f,k as u,l as d,m,F as p,x as _,p as y,t as g,g as x,M as b,C as v,i as h,D as k,y as w}from"./index-BYbmVHYF.js";import{_ as j}from"./s-goods-item.B-P-c7gz.js";import{_ as $}from"./s-empty.tLh6VNZu.js";import{_ as T,S as C}from"./s-layout.B9Wf0wyf.js";import{p as M,r as N,f as S}from"./useGoods.BAFIflfD.js";import{A}from"./afterSale.Binm2aK2.js";import{_ as F}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./index.DEmjmW11.js";const D=F({__name:"detail",setup(F){s((s=>({43918483:c(z)})));const D=2*e.$platform.device.statusBarHeight,z=e.$url.css("/static/img/shop/order/order_bg.png"),B=t({id:0,info:{},loading:!1,active:0,list:[{title:"提交申请"},{title:"处理中"},{title:"完成"}]});const G=()=>{e.$helper.copyText(B.info.no)};async function H(s){B.loading=!0;const{code:e,data:t}=await A.getAfterSale(s);0===e?(B.info=t,M(B.info),[10].includes(B.info.status)?B.active=0:[20,30].includes(B.info.status)?B.active=1:([40,50].includes(B.info.status)||[61,62,63].includes(B.info.status))&&(B.active=2)):B.info=null}return a((s=>{s.id?(B.id=s.id,H(s.id)):e.$helper.toast("缺少订单信息，请检查")})),(s,t)=>{const a=v,M=h,F=l(i("s-goods-item"),j),z=k,I=l(i("s-empty"),$),P=l(i("su-fixed"),T),R=l(i("s-layout"),C);return r(),o(R,{title:"售后详情",navbar:!c(f)(B.info)&&B.loading?"inner":"normal"},{default:n((()=>[!c(f)(B.info)&&B.loading?(r(),o(M,{key:0,class:"content_box"},{default:n((()=>[u(M,{class:"steps-box ss-flex",style:_([{marginTop:"-"+Number(D+88)+"rpx",paddingTop:Number(D+88)+"rpx"}])},{default:n((()=>[u(M,{class:"ss-flex"},{default:n((()=>[(r(!0),d(p,null,m(B.list,((s,e)=>(r(),o(M,{class:"steps-item",key:e},{default:n((()=>[u(M,{class:"ss-flex"},{default:n((()=>[B.list.length-1===e&&[61,62,63].includes(B.info.status)?(r(),o(a,{key:0,class:"sicon-circleclose"})):(r(),o(a,{key:1,class:w(["sicon-circlecheck",B.active>=e?"activity-color":"info-color"])},null,8,["class"])),B.list.length-1!==e?(r(),o(M,{key:2,class:w(["line",B.active>=e?"activity-bg":"info-bg"])},null,8,["class"])):x("",!0)])),_:2},1024),u(M,{class:w(["steps-item-title",B.active>=e?"activity-color":"info-color"])},{default:n((()=>[y(g(s.title),1)])),_:2},1032,["class"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["style"]),u(M,{class:"status-box ss-flex ss-col-center ss-row-between ss-m-x-20",onClick:t[0]||(t[0]=s=>c(e).$router.go("/pages/order/aftersale/log",{id:B.id}))},{default:n((()=>[u(M,{class:""},{default:n((()=>[u(M,{class:"status-text"},{default:n((()=>[y(g(c(N)(B.info)),1)])),_:1}),u(M,{class:"status-time"},{default:n((()=>[y(g(c(e).$helper.timeFormat(B.info.updateTime,"yyyy-mm-dd hh:MM:ss")),1)])),_:1})])),_:1}),u(a,{class:"ss-iconfont _icon-forward",style:{color:"#666"}})])),_:1}),u(M,{class:"aftersale-money ss-flex ss-col-center ss-row-between"},{default:n((()=>[u(M,{class:"aftersale-money--title"},{default:n((()=>[y("退款总额")])),_:1}),u(M,{class:"aftersale-money--num"},{default:n((()=>[y("￥"+g(c(S)(B.info.refundPrice)),1)])),_:1})])),_:1}),u(M,{class:"order-shop"},{default:n((()=>[u(F,{img:B.info.picUrl,title:B.info.spuName,titleWidth:480,skuText:B.info.properties.map((s=>s.valueName)).join(" "),num:B.info.count},null,8,["img","title","skuText","num"])])),_:1}),u(M,{class:"aftersale-content"},{default:n((()=>[u(M,{class:"aftersale-item ss-flex ss-col-center"},{default:n((()=>[u(M,{class:"item-title"},{default:n((()=>[y("服务单号：")])),_:1}),u(M,{class:"item-content ss-m-r-16"},{default:n((()=>[y(g(B.info.no),1)])),_:1}),u(z,{class:"ss-reset-button copy-btn",onClick:G},{default:n((()=>[y("复制")])),_:1})])),_:1}),u(M,{class:"aftersale-item ss-flex ss-col-center"},{default:n((()=>[u(M,{class:"item-title"},{default:n((()=>[y("申请时间：")])),_:1}),u(M,{class:"item-content"},{default:n((()=>[y(g(c(e).$helper.timeFormat(B.info.createTime,"yyyy-mm-dd hh:MM:ss")),1)])),_:1})])),_:1}),u(M,{class:"aftersale-item ss-flex ss-col-center"},{default:n((()=>[u(M,{class:"item-title"},{default:n((()=>[y("售后类型：")])),_:1}),u(M,{class:"item-content"},{default:n((()=>[y(g(10===B.info.way?"仅退款":"退款退货"),1)])),_:1})])),_:1}),u(M,{class:"aftersale-item ss-flex ss-col-center"},{default:n((()=>[u(M,{class:"item-title"},{default:n((()=>[y("申请原因：")])),_:1}),u(M,{class:"item-content"},{default:n((()=>[y(g(B.info.applyReason),1)])),_:1})])),_:1}),u(M,{class:"aftersale-item ss-flex ss-col-center"},{default:n((()=>[u(M,{class:"item-title"},{default:n((()=>[y("相关描述：")])),_:1}),u(M,{class:"item-content"},{default:n((()=>[y(g(B.info.applyDescription),1)])),_:1})])),_:1})])),_:1})])),_:1})):x("",!0),c(f)(B.info)&&B.loading?(r(),o(I,{key:1,icon:"/static/order-empty.png",text:"暂无该订单售后详情"})):x("",!0),c(f)(B.info)?x("",!0):(r(),o(P,{key:2,bottom:"",placeholder:"",bg:"bg-white"},{default:n((()=>[u(M,{class:"foot_box"},{default:n((()=>{var s,a;return[(null==(s=B.info.buttons)?void 0:s.includes("cancel"))?(r(),o(z,{key:0,class:"ss-reset-button btn",onClick:t[1]||(t[1]=s=>{return e=B.info.id,void b({title:"提示",content:"确定要取消此申请吗？",success:async function(s){if(!s.confirm)return;const{code:t}=await A.cancelAfterSale(e);0===t&&await H(e)}});var e})},{default:n((()=>[y(" 取消申请 ")])),_:1})):x("",!0),(null==(a=B.info.buttons)?void 0:a.includes("delivery"))?(r(),o(z,{key:1,class:"ss-reset-button btn",onClick:t[2]||(t[2]=s=>c(e).$router.go("/pages/order/aftersale/return-delivery",{id:B.info.id}))},{default:n((()=>[y(" 填写退货 ")])),_:1})):x("",!0),u(z,{class:"ss-reset-button contcat-btn btn",onClick:t[3]||(t[3]=s=>c(e).$router.go("/pages/chat/index"))},{default:n((()=>[y(" 联系客服 ")])),_:1})]})),_:1})])),_:1}))])),_:1},8,["navbar"])}}},[["__scopeId","data-v-0d6e91aa"]]);export{D as default};
